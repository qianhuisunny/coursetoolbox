/* Codestar Framework | A Simple and Lightweight WordPress Option Framework - v2.3.0*/

"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t,n,i){var a=a||{};a.funcs={},a.vars={onloaded:!1,$body:e("body"),$window:e(t),$document:e(n),$form_warning:null,is_confirm:!1,form_modified:!1,code_themes:[],is_rtl:e("body").hasClass("rtl")},a.helper={uid:function(e){return(e||"")+Math.random().toString(36).substr(2,9)},preg_quote:function(e){return(e+"").replace(/(\[|\])/g,"\\$1")},name_nested_replace:function(t,n){var i=new RegExp(a.helper.preg_quote(n+"[\\d+]"),"g");t.find(":radio").each(function(){(this.checked||this.orginal_checked)&&(this.orginal_checked=!0)}),t.each(function(t){e(this).find(":input").each(function(){this.name=this.name.replace(i,n+"["+t+"]"),this.orginal_checked&&(this.checked=!0)})})},debounce:function(e,t,n){var i;return function(){var a=this,s=arguments,c=function(){i=null,n||e.apply(a,s)},r=n&&!i;clearTimeout(i),i=setTimeout(c,t),r&&e.apply(a,s)}}},e.fn.csf_clone=function(){for(var t=e.fn.clone.apply(this,arguments),n=this.find("select").add(this.filter("select")),i=t.find("select").add(t.filter("select")),a=0;a<n.length;++a)for(var s=0;s<n[a].options.length;++s)!0===n[a].options[s].selected&&(i[a].options[s].selected=!0);return this.find(":radio").each(function(){this.orginal_checked=this.checked}),t},e.fn.csf_expand_all=function(){return this.each(function(){e(this).on("click",function(t){t.preventDefault(),e(".csf-wrapper").toggleClass("csf-show-all"),e(".csf-section").csf_reload_script(),e(this).find(".fa").toggleClass("fa-indent").toggleClass("fa-outdent");var n=e(".csf-wrapper");if(n.hasClass("csf-search-all")){var i=n.find(".csf-section > .csf-field:not(.csf-depend-on)");e(".csf-search input").val(""),n.removeClass("csf-search-all"),i.removeClass("csf-metabox-hide")}})})},e.fn.csf_nav_options=function(){return this.each(function(){var n,i=e(this),a=e(t),s=e("#wpwrap"),c=i.find("a");a.on("hashchange csf.hashchange",function(){var i=t.location.hash.replace("#tab=",""),a=i||c.first().attr("href").replace("#tab=",""),r=e('[data-tab-id="'+a+'"]');if(r.length){r.closest(".csf-tab-item").addClass("csf-tab-expanded").siblings().removeClass("csf-tab-expanded"),r.next().is("ul")&&(r=r.next().find("li").first().find("a"),a=r.data("tab-id")),c.removeClass("csf-active"),r.addClass("csf-active"),n&&n.addClass("hidden");var o=e('[data-section-id="'+a+'"]');o.removeClass("hidden"),o.csf_reload_script(),e(".csf-section-id").val(o.index()+1),n=o,s.hasClass("wp-responsive-open")&&(e("html, body").animate({scrollTop:o.offset().top-50},200),s.removeClass("wp-responsive-open"));var f=e(".csf-wrapper");f.hasClass("csf-show-all")&&f.removeClass("csf-show-all")}}).trigger("csf.hashchange")})},e.fn.csf_nav_metabox=function(){return this.each(function(){var t,n=e(this),i=n.find("a"),a=n.parent().find(".csf-section");i.each(function(n){e(this).on("click",function(s){s.preventDefault();var c=e(this);i.removeClass("csf-active"),c.addClass("csf-active"),void 0!==t&&t.addClass("hidden");var r=a.eq(n);r.removeClass("hidden"),r.csf_reload_script(),t=r})}),i.first().trigger("click")})},e.fn.csf_page_templates=function(){this.length&&e(n).on("change",".editor-page-attributes__template select, #page_template, .edit-post-post-status + div select",function(){var t=e(this).val()||"default";e(".csf-page-templates").removeClass("csf-metabox-show").addClass("csf-metabox-hide"),e(".csf-page-"+t.toLowerCase().replace(/[^a-zA-Z0-9]+/g,"-")).removeClass("csf-metabox-hide").addClass("csf-metabox-show")})},e.fn.csf_post_formats=function(){this.length&&e(n).on("change",'.editor-post-format select, #formatdiv input[name="post_format"]',function(){var t=e(this).val()||"default";t="0"===t?"default":t,e(".csf-post-formats").removeClass("csf-metabox-show").addClass("csf-metabox-hide"),e(".csf-post-format-"+t).removeClass("csf-metabox-hide").addClass("csf-metabox-show")})},e.fn.csf_search=function(){return this.each(function(){e(this).find("input").on("change keyup",function(){var n=e(this).val(),i=e(".csf-wrapper"),a=i.find(".csf-section"),s=a.find("> .csf-field:not(.csf-depend-on)"),c=s.find("> .csf-title, .csf-search-tags");n.length>1?(s.addClass("csf-metabox-hide"),i.addClass("csf-search-all"),c.each(function(){var i=e(this);if(i.text().match(new RegExp(".*?"+n+".*?","i"))){var a=i.closest(".csf-field");a.removeClass("csf-metabox-hide"),a.parent().csf_reload_script();var s=a.parent().data("section-id"),c=t.location.href.split("#tab")[0]+"#tab="+s,r="<p class='search-list-name'><b>目录</b><a href='"+c+"' target='_blank'>"+decodeURIComponent(s)+" <i class='fa fa-angle-right' aria-hidden='true'></i></a></p>";a.find(".search-list-name")[0]||a.prepend(r)}})):(e(".search-list-name").remove(),s.removeClass("csf-metabox-hide"),i.removeClass("csf-search-all"))})})},e.fn.csf_sticky=function(){return this.each(function(){var n=e(this),i=e(t),a=n.find(".csf-header-inner"),s=parseInt(a.css("padding-left"))+parseInt(a.css("padding-right")),c=0,r=!1,o=function(){var e=n.offset().top,t=Math.max(32,e-c),r=i.innerWidth();t<=32&&r>782?(a.css({width:n.outerWidth()-s}),n.css({height:n.outerHeight()}).addClass("csf-sticky")):(a.removeAttr("style"),n.removeAttr("style").removeClass("csf-sticky"))},f=function(){r||requestAnimationFrame(function(){o(),r=!1}),r=!0},l=function(){c=i.scrollTop(),f()};i.on("scroll resize",l),l()})},e.fn.csf_dependency=function(){return this.each(function(){var t=e(this),n=t.children("[data-controller]");if(n.length){var i=e.csf_deps.createRuleset(),s=e.csf_deps.createRuleset(),c=[],r=[];n.each(function(){var t=e(this),n=t.data("controller").split("|"),a=t.data("condition").split("|"),o=t.data("value").toString().split("|"),f=!!t.data("depend-global"),l=f?s:i;e.each(n,function(e,n){var i=o[e]||"",s=a[e]||a[0];l=l.createRule('[data-depend-id="'+n+'"]',s,i),l.include(t),f?r.push(n):c.push(n)})}),c.length&&e.csf_deps.enable(t,i,c),r.length&&e.csf_deps.enable(a.vars.$body,s,r)}})},e.fn.csf_field_accordion=function(){return this.each(function(){e(this).find(".csf-accordion-title").on("click",function(){var t=e(this),n=t.find(".csf-accordion-icon"),i=t.next();n.hasClass("fa-angle-right")?n.removeClass("fa-angle-right").addClass("fa-angle-down"):n.removeClass("fa-angle-down").addClass("fa-angle-right"),i.data("opened")||(i.csf_reload_script(),i.data("opened",!0)),i.toggleClass("csf-accordion-open")})})},e.fn.csf_field_backup=function(){return this.each(function(){if(void 0!==t.wp.customize){var n=this,i=e(this),s=(e("body"),i.find(".csf-import")),c=i.find(".csf-reset");n.notificationOverlay=function(){wp.customize.notifications&&wp.customize.OverlayNotification&&(wp.customize.state("saved").get()||(wp.customize.state("changesetStatus").set("trash"),wp.customize.each(function(e){e._dirty=!1}),wp.customize.state("saved").set(!0)),wp.customize.notifications.add(new wp.customize.OverlayNotification("csf_field_backup_notification",{type:"default",message:"&nbsp;",loading:!0})))},c.on("click",function(e){e.preventDefault(),a.vars.is_confirm&&(n.notificationOverlay(),t.wp.ajax.post("csf-reset",{unique:c.data("unique"),nonce:c.data("nonce")}).done(function(e){t.location.reload(!0)}).fail(function(e){alert(e.error),wp.customize.notifications.remove("csf_field_backup_notification")}))}),s.on("click",function(e){e.preventDefault(),a.vars.is_confirm&&(n.notificationOverlay(),t.wp.ajax.post("csf-import",{unique:s.data("unique"),nonce:s.data("nonce"),data:i.find(".csf-import-data").val()}).done(function(e){t.location.reload(!0)}).fail(function(e){alert(e.error),wp.customize.notifications.remove("csf_field_backup_notification")}))})}})},e.fn.csf_field_background=function(){return this.each(function(){e(this).find(".csf--background-image").csf_reload_script()})},e.fn.csf_field_code_editor=function(){return this.each(function(){if("function"==typeof CodeMirror){var t=e(this),n=t.find("textarea"),i=t.find(".CodeMirror"),s=n.data("editor");i.length&&i.remove();var c=setInterval(function(){if(t.is(":visible")){var i=CodeMirror.fromTextArea(n[0],s);if("default"!==s.theme&&-1===a.vars.code_themes.indexOf(s.theme)){var r=e("<link>");e("#csf-codemirror-css").after(r),r.attr({rel:"stylesheet",id:"csf-codemirror-"+s.theme+"-css",href:s.cdnURL+"/theme/"+s.theme+".min.css",type:"text/css",media:"all"}),a.vars.code_themes.push(s.theme)}CodeMirror.modeURL=s.cdnURL+"/mode/%N/%N.min.js",CodeMirror.autoLoadMode(i,s.mode),i.on("change",function(e,t){n.val(i.getValue()).trigger("change")}),clearInterval(c)}})}})},e.fn.csf_field_date=function(){return this.each(function(){var t=e(this),n=t.find("input"),i=t.find(".csf-date-settings").data("settings"),a={showAnim:"",beforeShow:function(t,n){e(n.dpDiv).addClass("csf-datepicker-wrapper")},onClose:function(t,n){e(n.dpDiv).removeClass("csf-datepicker-wrapper")}};i=e.extend({},i,a),2===n.length&&(i=e.extend({},i,{onSelect:function(t){var a=(e(this),n.first(),n.first().attr("id")===e(this).attr("id")?"minDate":"maxDate"),s=e.datepicker.parseDate(i.dateFormat,t);n.not(this).datepicker("option",a,s)}})),n.each(function(){var t=e(this);t.hasClass("hasDatepicker")&&t.removeAttr("id").removeClass("hasDatepicker"),t.datepicker(i)})})},e.fn.csf_field_datetime=function(){return this.each(function(){var t=e(this),n=t.find("input"),i=t.find(".csf-datetime-settings").data("settings");i=e.extend({},i,{onReady:function(t,n,i){e(i.calendarContainer).addClass("csf-flatpickr")}}),2===n.length&&(i=e.extend({},i,{onChange:function(t,i,a){"from"===e(a.element).data("type")?n.last().get(0)._flatpickr.set("minDate",t[0]):n.first().get(0)._flatpickr.set("maxDate",t[0])}})),n.each(function(){e(this).flatpickr(i)})})},e.fn.csf_field_fieldset=function(){return this.each(function(){e(this).find(".csf-fieldset-content").csf_reload_script()})},e.fn.csf_field_gallery=function(){return this.each(function(){var n,i=e(this),a=i.find(".csf-edit-gallery"),s=i.find(".csf-clear-gallery"),c=i.find("ul"),r=i.find("input");i.find("img");i.on("click",".csf-button, .csf-edit-gallery",function(i){var o=e(this),f=r.val(),l=o.hasClass("csf-edit-gallery")?"edit":"add",d="add"!==l||f.length?"gallery-edit":"gallery";i.preventDefault(),void 0!==t.wp&&t.wp.media&&t.wp.media.gallery&&("gallery"===d?(n=t.wp.media({library:{type:"image"},frame:"post",state:"gallery",multiple:!0}),n.open()):(n=t.wp.media.gallery.edit('[gallery ids="'+f+'"]'),"add"===l&&n.setState("gallery-library")),n.on("update",function(e){c.empty();var t=e.models.map(function(e){var t=e.toJSON(),n=t.sizes&&t.sizes.thumbnail&&t.sizes.thumbnail.url?t.sizes.thumbnail.url:t.url;return c.append('<li><img src="'+n+'"></li>'),t.id});r.val(t.join(",")).trigger("change"),s.removeClass("hidden"),a.removeClass("hidden")}))}),s.on("click",function(e){e.preventDefault(),c.empty(),r.val("").trigger("change"),s.addClass("hidden"),a.addClass("hidden")})})},e.fn.csf_field_group=function(){return this.each(function(){var t=e(this),n=t.children(".csf-fieldset"),i=n.length?n:t,s=i.children(".csf-cloneable-wrapper"),c=i.children(".csf-cloneable-hidden"),r=i.children(".csf-cloneable-max"),o=i.children(".csf-cloneable-min"),f=s.data("title-by"),l=s.data("title-by-prefix"),d=s.data("field-id"),h=Boolean(Number(s.data("title-number"))),p=parseInt(s.data("max")),u=parseInt(s.data("min"));s.hasClass("ui-accordion")&&s.find(".ui-accordion-header-icon").remove();var v=function(t){t.find(".csf-cloneable-title-number").each(function(t){e(this).html(e(this).closest(".csf-cloneable-item").index()+1+".")})};s.accordion({header:"> .csf-cloneable-item > .csf-cloneable-title",collapsible:!0,active:!1,animate:!1,heightStyle:"content",icons:{header:"csf-cloneable-header-icon fas fa-angle-right",activeHeader:"csf-cloneable-header-icon fas fa-angle-down"},activate:function(t,n){var i=n.newPanel,a=n.newHeader;if(i.length&&!i.data("opened")){var s=a.find(".csf-cloneable-value"),c=[];e.each(f,function(e,t){c.push(i.find('[data-depend-id="'+t+'"]'))}),e.each(c,function(t,n){n.on("change keyup csf.keyup",function(){var t=[];e.each(c,function(e,n){var i=n.val();i&&t.push(i)}),t.length&&s.text(t.join(l))}).trigger("csf.keyup")}),i.csf_reload_script(),i.data("opened",!0),i.data("retry",!1)}else i.data("retry")&&(i.csf_reload_script_retry(),i.data("retry",!1))}}),s.sortable({axis:"y",handle:".csf-cloneable-title,.csf-cloneable-sort",helper:"original",cursor:"move",placeholder:"widget-placeholder",start:function(e,t){s.accordion({active:!1}),s.sortable("refreshPositions"),t.item.children(".csf-cloneable-content").data("retry",!0)},update:function(e,t){a.helper.name_nested_replace(s.children(".csf-cloneable-item"),d),s.csf_customizer_refresh(),h&&v(s)}}),i.children(".csf-cloneable-add").on("click",function(e){e.preventDefault();var t=s.children(".csf-cloneable-item").length;if(o.hide(),p&&t+1>p)return void r.show();var n=c.csf_clone(!0);n.removeClass("csf-cloneable-hidden"),n.find(':input[name!="_pseudo"]').each(function(){this.name=this.name.replace("___","").replace(d+"[0]",d+"["+t+"]")});var i=n.find('input[name*="index"]');if(i[0]&&t>0){for(var a=s.find('.csf-cloneable-item input[name*="index"]'),f=-1/0,l=0;l<a.length;l++){var u=Number(a[l].value);isNaN(u)||(f=Math.max(f,u))}i.val(f+1)}s.append(n),s.accordion("refresh"),s.accordion({active:t}),s.csf_customizer_refresh(),s.csf_customizer_listen({closest:!0}),h&&v(s)});var g=function(t){t.preventDefault();var n=s.children(".csf-cloneable-item").length;if(o.hide(),p&&n+1>p)return void r.show();var i=e(this),c=i.parent().parent(),f=c.children(".csf-cloneable-helper").csf_clone(!0),l=c.children(".csf-cloneable-title").csf_clone(),u=c.children(".csf-cloneable-content").csf_clone(),g=e('<div class="csf-cloneable-item" />');g.append(f),g.append(l),g.append(u),s.children().eq(c.index()).after(g),a.helper.name_nested_replace(s.children(".csf-cloneable-item"),d),s.accordion("refresh"),s.csf_customizer_refresh(),s.csf_customizer_listen({closest:!0}),h&&v(s)};s.children(".csf-cloneable-item").children(".csf-cloneable-helper").on("click",".csf-cloneable-clone",g),i.children(".csf-cloneable-hidden").children(".csf-cloneable-helper").on("click",".csf-cloneable-clone",g);var m=function(t){t.preventDefault();var n=s.children(".csf-cloneable-item").length;if(r.hide(),o.hide(),u&&n-1<u)return void o.show();e(this).closest(".csf-cloneable-item").remove(),a.helper.name_nested_replace(s.children(".csf-cloneable-item"),d),s.csf_customizer_refresh(),h&&v(s)};s.children(".csf-cloneable-item").children(".csf-cloneable-helper").on("click",".csf-cloneable-remove",m),i.children(".csf-cloneable-hidden").children(".csf-cloneable-helper").on("click",".csf-cloneable-remove",m)})},e.fn.csf_field_icon=function(){return this.each(function(){var n=e(this);n.on("click",".csf-icon-add",function(i){i.preventDefault();var s=e(this),c=e("#csf-modal-icon");c.removeClass("hidden"),a.vars.$icon_target=n,a.vars.icon_modal_loaded||(c.find(".csf-modal-loading").show(),t.wp.ajax.post("csf-get-icons",{nonce:s.data("nonce")}).done(function(t){c.find(".csf-modal-loading").hide(),a.vars.icon_modal_loaded=!0;var n=c.find(".csf-modal-load").html(t.content);n.on("click","i",function(t){t.preventDefault();var n=e(this).attr("title");a.vars.$icon_target.find(".csf-icon-preview i").removeAttr("class").addClass(n),a.vars.$icon_target.find(".csf-icon-preview").removeClass("hidden"),a.vars.$icon_target.find(".csf-icon-remove").removeClass("hidden"),a.vars.$icon_target.find("input").val(n).trigger("change"),c.addClass("hidden")}),c.on("change keyup",".csf-icon-search",function(){var t=e(this).val();n.find("i").each(function(){var n=e(this);n.attr("title").search(new RegExp(t,"i"))<0?n.hide():n.show()})}),c.on("click",".csf-modal-close, .csf-modal-overlay",function(){c.addClass("hidden")})}).fail(function(e){c.find(".csf-modal-loading").hide(),c.find(".csf-modal-load").html(e.error),c.on("click",function(){c.addClass("hidden")})}))}),n.on("click",".csf-icon-remove",function(t){t.preventDefault(),n.find(".csf-icon-preview").addClass("hidden"),n.find("input").val("").trigger("change"),e(this).addClass("hidden")})})},e.fn.csf_field_map=function(){return this.each(function(){if("undefined"!=typeof L){var t=e(this),n=t.find(".csf--map-osm"),i=t.find(".csf--map-search input"),a=t.find(".csf--latitude"),s=t.find(".csf--longitude"),c=t.find(".csf--zoom"),r=n.data("map"),o=L.map(n.get(0),r);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(o);var f=L.marker(r.center,{draggable:!0}).addTo(o),l=function(e){a.val(e.lat),s.val(e.lng),c.val(o.getZoom())};o.on("click",function(e){f.setLatLng(e.latlng),l(e.latlng)}),o.on("zoom",function(){l(f.getLatLng())}),f.on("drag",function(){l(f.getLatLng())}),i.length||(i=e('[data-depend-id="'+t.find(".csf--address-field").data("address-field")+'"]'));var d={};i.autocomplete({source:function(t,n){var i=t.term;if(i in d)return void n(d[i]);e.get("https://nominatim.openstreetmap.org/search",{format:"json",q:i},function(e){var t;t=e.length?e.map(function(e){return{value:e.display_name,label:e.display_name,lat:e.lat,lon:e.lon}},"json"):[{value:"no-data",label:"No Results."}],d[i]=t,n(t)})},select:function(e,t){if("no-data"===t.item.value)return!1;var n=L.latLng(t.item.lat,t.item.lon);o.panTo(n),f.setLatLng(n),l(n)},create:function(t,n){e(this).autocomplete("widget").addClass("csf-map-ui-autocomplate")}});var h=function(){var e=L.latLng(a.val(),s.val());o.panTo(e),f.setLatLng(e)};a.on("change",h),s.on("change",h)}})},e.fn.csf_field_link=function(){return this.each(function(){var n=e(this),i=n.find(".csf--link"),s=n.find(".csf--add"),c=n.find(".csf--edit"),r=n.find(".csf--remove"),o=n.find(".csf--result"),f=a.helper.uid("csf-wplink-textarea-");s.on("click",function(e){e.preventDefault(),t.wpLink.open(f)}),c.on("click",function(t){t.preventDefault(),s.trigger("click"),e("#wp-link-url").val(n.find(".csf--url").val()),e("#wp-link-text").val(n.find(".csf--text").val()),e("#wp-link-target").prop("checked","_blank"===n.find(".csf--target").val())}),r.on("click",function(e){e.preventDefault(),n.find(".csf--url").val("").trigger("change"),n.find(".csf--text").val(""),n.find(".csf--target").val(""),s.removeClass("hidden"),c.addClass("hidden"),r.addClass("hidden"),o.parent().addClass("hidden")}),i.attr("id",f).on("change",function(){var i=t.wpLink.getAttrs(),a=i.href,f=e("#wp-link-text").val(),l=i.target?i.target:"";n.find(".csf--url").val(a).trigger("change"),n.find(".csf--text").val(f),n.find(".csf--target").val(l),o.html('{url:"'+a+'", text:"'+f+'", target:"'+l+'"}'),s.addClass("hidden"),c.removeClass("hidden"),r.removeClass("hidden"),o.parent().removeClass("hidden")})})},e.fn.csf_field_media=function(){return this.each(function(){var n,i=e(this),a=i.find(".csf--button"),s=i.find(".csf--remove"),c=a.data("library")&&a.data("library").split(",")||"",r=!!i.hasClass("csf-assign-field-background")&&i.closest(".csf-field-background").find(".csf--auto-attributes");a.on("click",function(e){if(e.preventDefault(),void 0!==t.wp&&t.wp.media&&t.wp.media.gallery){if(n)return void n.open();n=t.wp.media({library:{type:c}}),n.on("select",function(){var e,t=n.state().get("selection").first().attributes,o=a.data("preview-size")||"thumbnail";c.length&&-1===c.indexOf(t.subtype)&&-1===c.indexOf(t.type)||(i.find(".csf--id").val(t.id),i.find(".csf--width").val(t.width),i.find(".csf--height").val(t.height),i.find(".csf--alt").val(t.alt),i.find(".csf--title").val(t.title),i.find(".csf--description").val(t.description),e=void 0!==t.sizes&&void 0!==t.sizes.thumbnail&&"thumbnail"===o?t.sizes.thumbnail.url:void 0!==t.sizes&&void 0!==t.sizes.full?t.sizes.full.url:"image"===t.type?t.url:t.icon,r&&r.removeClass("csf--attributes-hidden"),s.removeClass("hidden"),i.find(".csf--preview").removeClass("hidden"),i.find(".csf--src").attr("src",e),i.find(".csf--thumbnail").val(e),i.find(".csf--url").val(t.url).trigger("change"))}),n.open()}}),s.on("click",function(e){e.preventDefault(),r&&r.addClass("csf--attributes-hidden"),s.addClass("hidden"),i.find("input").val(""),i.find(".csf--preview").addClass("hidden"),i.find(".csf--url").trigger("change")})})},e.fn.csf_field_repeater=function(){return this.each(function(){var t=e(this),n=t.children(".csf-fieldset"),i=n.length?n:t,s=i.children(".csf-repeater-wrapper"),c=i.children(".csf-repeater-hidden"),r=i.children(".csf-repeater-max"),o=i.children(".csf-repeater-min"),f=s.data("field-id"),l=parseInt(s.data("max")),d=parseInt(s.data("min"));s.children(".csf-repeater-item").children(".csf-repeater-content").csf_reload_script(),s.sortable({axis:"y",handle:".csf-repeater-sort",helper:"original",cursor:"move",placeholder:"widget-placeholder",update:function(e,t){a.helper.name_nested_replace(s.children(".csf-repeater-item"),f),s.csf_customizer_refresh(),t.item.csf_reload_script_retry()}}),i.children(".csf-repeater-add").on("click",function(e){e.preventDefault();var t=s.children(".csf-repeater-item").length;if(o.hide(),l&&t+1>l)return void r.show();var n=c.csf_clone(!0);n.removeClass("csf-repeater-hidden"),n.find(':input[name!="_pseudo"]').each(function(){this.name=this.name.replace("___","").replace(f+"[0]",f+"["+t+"]")}),s.append(n),n.children(".csf-repeater-content").csf_reload_script(),s.csf_customizer_refresh(),s.csf_customizer_listen({closest:!0})});var h=function(t){t.preventDefault();var n=s.children(".csf-repeater-item").length;if(o.hide(),l&&n+1>l)return void r.show();var i=e(this),c=i.parent().parent().parent(),d=c.children(".csf-repeater-content").csf_clone(),h=c.children(".csf-repeater-helper").csf_clone(!0),p=e('<div class="csf-repeater-item" />');p.append(d),p.append(h),s.children().eq(c.index()).after(p),p.children(".csf-repeater-content").csf_reload_script(),a.helper.name_nested_replace(s.children(".csf-repeater-item"),f),s.csf_customizer_refresh(),s.csf_customizer_listen({closest:!0})};s.children(".csf-repeater-item").children(".csf-repeater-helper").on("click",".csf-repeater-clone",h),i.children(".csf-repeater-hidden").children(".csf-repeater-helper").on("click",".csf-repeater-clone",h);var p=function(t){t.preventDefault();var n=s.children(".csf-repeater-item").length;if(r.hide(),o.hide(),d&&n-1<d)return void o.show();e(this).closest(".csf-repeater-item").remove(),a.helper.name_nested_replace(s.children(".csf-repeater-item"),f),s.csf_customizer_refresh()};s.children(".csf-repeater-item").children(".csf-repeater-helper").on("click",".csf-repeater-remove",p),i.children(".csf-repeater-hidden").children(".csf-repeater-helper").on("click",".csf-repeater-remove",p)})},e.fn.csf_field_slider=function(){return this.each(function(){var t=e(this),n=t.find("input"),i=t.find(".csf-slider-ui"),a=n.data(),s=n.val()||0;i.hasClass("ui-slider")&&i.empty(),i.slider({range:"min",value:s,min:a.min||0,max:a.max||100,step:a.step||1,slide:function(e,t){n.val(t.value).trigger("change")}}),n.on("keyup",function(){i.slider("value",n.val())})})},e.fn.csf_field_sortable=function(){return this.each(function(){var t=e(this).find(".csf-sortable");t.sortable({axis:"y",helper:"original",cursor:"move",placeholder:"widget-placeholder",update:function(e,n){t.csf_customizer_refresh()}}),t.find(".csf-sortable-content").csf_reload_script()})},e.fn.csf_field_sorter=function(){return this.each(function(){var t=e(this),n=t.find(".csf-enabled"),i=t.find(".csf-disabled"),a=!!i.length&&i;n.sortable({connectWith:a,placeholder:"ui-sortable-placeholder",update:function(e,n){var i=n.item.find("input");n.item.parent().hasClass("csf-enabled")?i.attr("name",i.attr("name").replace("disabled","enabled")):i.attr("name",i.attr("name").replace("enabled","disabled")),t.csf_customizer_refresh()}}),a&&a.sortable({connectWith:n,placeholder:"ui-sortable-placeholder",update:function(e,n){t.csf_customizer_refresh()}})})},e.fn.csf_field_spinner=function(){return this.each(function(){var t=e(this),n=t.find("input"),i=t.find(".ui-button"),a=n.data();i.length&&i.remove(),n.spinner({min:a.min||0,max:a.max||100,step:a.step||1,create:function(e,t){a.unit&&n.after('<span class="ui-button csf--unit">'+a.unit+"</span>")},spin:function(e,t){n.val(t.value).trigger("change")}})})},e.fn.csf_field_switcher=function(){return this.each(function(){var t=e(this).find(".csf--switcher");t.on("click",function(){var e=0,n=t.find("input");t.hasClass("csf--active")?t.removeClass("csf--active"):(e=1,t.addClass("csf--active")),n.val(e).trigger("change")})})},e.fn.csf_field_tabbed=function(){return this.each(function(){var t=e(this),n=t.find(".csf-tabbed-nav a"),i=t.find(".csf-tabbed-content");i.eq(0).csf_reload_script(),n.on("click",function(t){t.preventDefault();var n=e(this),a=n.index(),s=i.eq(a);n.addClass("csf-tabbed-active").siblings().removeClass("csf-tabbed-active"),s.csf_reload_script(),s.removeClass("hidden").siblings().addClass("hidden")})})},e.fn.csf_field_typography=function(){return this.each(function(){var t=this,n=e(this),i=[],s=csf_typography_json.webfonts,c=csf_typography_json.googlestyles,r=csf_typography_json.defaultstyles;t.sanitize_subset=function(e){return e=e.replace("-ext"," Extended"),e=e.charAt(0).toUpperCase()+e.slice(1)},t.sanitize_style=function(e){return c[e]?c[e]:e},t.load_google_font=function(e,t,n){e&&"object"===("undefined"==typeof WebFont?"undefined":_typeof(WebFont))&&(t=t?t.replace("normal",""):"",n=n?n.replace("normal",""):"",(t||n)&&(e=e+":"+t+n),-1===i.indexOf(e)&&WebFont.load({google:{families:[e]}}),i.push(e))},t.append_select_options=function(n,i,a,s,c){n.find("option").not(":first").remove();var r="";e.each(i,function(e,n){var i,o=n;i=c?a&&-1!==a.indexOf(n)?" selected":"":a&&a===n?" selected":"","subset"===s?o=t.sanitize_subset(n):"style"===s&&(o=t.sanitize_style(n)),r+='<option value="'+n+'"'+i+">"+o+"</option>"}),n.append(r).trigger("csf.change").trigger("chosen:updated")},t.init=function(){var i=[],c=n.find(".csf--typography"),o=n.find(".csf--type"),f=n.find(".csf--block-font-style"),l=c.data("unit"),d=c.data("line-height-unit"),h=c.data("exclude")?c.data("exclude").split(","):[];if(n.find(".csf--chosen").length){n.find("select").each(function(){var t=e(this),n=t.parent().find(".chosen-container");n.length&&n.remove(),t.chosen({allow_single_deselect:!0,disable_search_threshold:15,width:"100%"})})}var p=n.find(".csf--font-family"),u=p.val();p.find("option").not(":first-child").remove();var v="";e.each(s,function(t,n){h&&-1!==h.indexOf(t)||(v+='<optgroup label="'+n.label+'">',e.each(n.fonts,function(e,n){n="object"===(void 0===n?"undefined":_typeof(n))?e:n,v+='<option value="'+n+'" data-type="'+t+'"'+(n===u?" selected":"")+">"+n+"</option>"}),v+="</optgroup>")}),p.append(v).trigger("chosen:updated");var g=n.find(".csf--block-font-style");if(g.length){var m=n.find(".csf--font-style-select"),_=m.val()?m.val().replace(/normal/g,""):"";m.on("change csf.change",function(e){var t=m.val();!t&&i&&-1===i.indexOf("normal")&&(t=i[0]);var a=t&&"italic"!==t&&"normal"===t?"normal":"",s=t&&"italic"!==t&&"normal"!==t?t.replace("italic",""):a,c=t&&"italic"===t.substr(-6)?"italic":"";n.find(".csf--font-weight").val(s),n.find(".csf--font-style").val(c)});var b=n.find(".csf--block-extra-styles");if(b.length)var y=n.find(".csf--extra-styles"),w=y.val()}var C=n.find(".csf--block-subset");if(C.length)var k=n.find(".csf--subset"),x=k.val(),z=k.data("multiple")||!1;var D=n.find(".csf--block-backup-font-family");p.on("change csf.change",function(e){C.length&&C.addClass("hidden"),b.length&&b.addClass("hidden"),D.length&&D.addClass("hidden");var n=p.find(":selected"),a=n.val(),c=n.data("type");if(c&&a){if("google"!==c&&"custom"!==c||!D.length||D.removeClass("hidden"),g.length){var l=r;"google"===c&&s[c].fonts[a][0]?l=s[c].fonts[a][0]:"custom"===c&&s[c].fonts[a]&&(l=s[c].fonts[a]),i=l;var d=-1!==l.indexOf("normal")?"normal":l[0],h=_&&-1!==l.indexOf(_)?_:d;t.append_select_options(m,l,h,"style"),_=!1,g.removeClass("hidden"),"google"===c&&b.length&&l.length>1&&(t.append_select_options(y,l,w,"style",!0),w=!1,b.removeClass("hidden"))}if("google"===c&&C.length&&s[c].fonts[a][1]){var u=s[c].fonts[a][1],v=u.length<2&&"latin"!==u[0]?u[0]:"",S=x&&-1!==u.indexOf(x)?x:v;S=z&&x?x:S,t.append_select_options(k,u,S,"subset",z),x=!1,C.removeClass("hidden")}}else f.find(":input").val(""),C.length&&(k.find("option").not(":first-child").remove(),k.trigger("chosen:updated")),g.length&&(m.find("option").not(":first-child").remove(),m.trigger("chosen:updated"));o.val(c)}).trigger("csf.change");var S=n.find(".csf--block-preview");if(S.length){var O=n.find(".csf--preview");n.on("change",a.helper.debounce(function(e){S.removeClass("hidden");var i=p.val(),a=n.find(".csf--font-weight").val(),s=n.find(".csf--font-style").val(),c=n.find(".csf--font-size").val(),r=n.find(".csf--font-variant").val(),o=n.find(".csf--line-height").val(),f=n.find(".csf--text-align").val(),h=n.find(".csf--text-transform").val(),u=n.find(".csf--text-decoration").val(),v=n.find(".csf--color").val(),g=n.find(".csf--word-spacing").val(),m=n.find(".csf--letter-spacing").val(),_=n.find(".csf--custom-style").val();"google"===n.find(".csf--type").val()&&t.load_google_font(i,a,s);var b={};i&&(b.fontFamily=i),a&&(b.fontWeight=a),s&&(b.fontStyle=s),r&&(b.fontVariant=r),c&&(b.fontSize=c+l),o&&(b.lineHeight=o+d),m&&(b.letterSpacing=m+l),g&&(b.wordSpacing=g+l),f&&(b.textAlign=f),h&&(b.textTransform=h),u&&(b.textDecoration=u),v&&(b.color=v),O.removeAttr("style"),_&&O.attr("style",_),O.css(b)},100)),S.on("click",function(){O.toggleClass("csf--black-background");var e=S.find(".csf--toggle");e.hasClass("fa-toggle-off")?e.removeClass("fa-toggle-off").addClass("fa-toggle-on"):e.removeClass("fa-toggle-on").addClass("fa-toggle-off")}),S.hasClass("hidden")||n.trigger("change")}},t.init()})},e.fn.csf_field_upload=function(){return this.each(function(){var n,i=e(this),a=i.find("input"),s=i.find(".csf--button"),c=i.find(".csf--remove"),r=i.find(".csf--preview"),o=i.find(".csf--src"),f=s.data("library")&&s.data("library").split(",")||"";s.on("click",function(e){if(e.preventDefault(),void 0!==t.wp&&t.wp.media&&t.wp.media.gallery){if(n)return void n.open();n=t.wp.media({library:{type:f}}),n.on("select",function(){var e=n.state().get("selection").first().attributes;f.length&&-1===f.indexOf(e.subtype)&&-1===f.indexOf(e.type)||a.val(e.url).trigger("change")}),n.open()}}),c.on("click",function(e){e.preventDefault(),a.val("").trigger("change")}),a.on("change",function(t){var n=a.val();n?c.removeClass("hidden"):c.addClass("hidden"),r.length&&(-1!==e.inArray(n.split(".").pop().toLowerCase(),["jpg","jpeg","gif","png","svg","webp"])?(r.removeClass("hidden"),o.attr("src",n)):r.addClass("hidden"))})})},e.fn.csf_field_wp_editor=function(){return this.each(function(){if(void 0!==t.wp.editor&&void 0!==t.tinyMCEPreInit&&void 0!==t.tinyMCEPreInit.mceInit.csf_wp_editor){var n=e(this),i=n.find(".csf-wp-editor"),s=n.find("textarea");(n.find(".wp-editor-wrap").length||n.find(".mce-container").length)&&(i.empty(),i.append(s),s.css("display",""));var c=a.helper.uid("csf-editor-");s.attr("id",c);var r={tinymce:t.tinyMCEPreInit.mceInit.csf_wp_editor,quicktags:t.tinyMCEPreInit.qtInit.csf_wp_editor},o=i.data("editor-settings"),f=wp.oldEditor?wp.oldEditor:wp.editor;f&&f.hasOwnProperty("autop")&&(wp.editor.autop=f.autop,wp.editor.removep=f.removep,wp.editor.initialize=f.initialize);var l=function(e){e.on("change keyup",function(){var t=o.wpautop?e.getContent():wp.editor.removep(e.getContent());s.val(t).trigger("change")})};r.tinymce=e.extend({},r.tinymce,{selector:"#"+c,setup:l}),!1===o.tinymce&&(r.tinymce=!1,i.addClass("csf-no-tinymce")),!1===o.quicktags&&(r.quicktags=!1,i.addClass("csf-no-quicktags"));var d=setInterval(function(){n.is(":visible")&&(t.wp.editor.initialize(c,r),clearInterval(d))});if(o.media_buttons&&t.csf_media_buttons){var h=i.find(".wp-media-buttons");if(h.length)h.find(".csf-shortcode-button").data("editor-id",c);else{var p=e(t.csf_media_buttons);p.find(".csf-shortcode-button").data("editor-id",c),i.prepend(p)}}}})},e.fn.csf_confirm=function(){return this.each(function(){e(this).on("click",function(n){var i=e(this).data("confirm")||t.csf_vars.i18n.confirm;if(!confirm(i))return n.preventDefault(),!1;a.vars.is_confirm=!0,a.vars.form_modified=!1})})},e.fn.serializeObject=function(){var t={};return e.each(this.serializeArray(),function(n,i){var a=i.name,s=i.value;t[a]=void 0===t[a]?s:e.isArray(t[a])?t[a].concat(s):[t[a],s]}),t},e.fn.csf_save=function(){return this.each(function(){var n,i=e(this),s=e(".csf-save"),c=e(".csf-options"),r=!1;i.on("click",function(o){if(!r){var f=i.data("save"),l=i.val();s.attr("value",f),i.hasClass("csf-save-ajax")?(o.preventDefault(),c.addClass("csf-saving"),s.prop("disabled",!0),t.wp.ajax.post("csf_"+c.data("unique")+"_ajax_save",{data:e("#csf-form").serializeJSONCSF()}).done(function(t){if(e(".csf-error").remove(),Object.keys(t.errors).length){var i='<i class="csf-label-error csf-error">!</i>';e.each(t.errors,function(t,n){var a=e('[data-depend-id="'+t+'"]'),s=e('a[href="#tab='+a.closest(".csf-section").data("section-id")+'"]'),c=s.closest(".csf-tab-item");a.closest(".csf-fieldset").append('<p class="csf-error csf-error-text">'+n+"</p>"),s.find(".csf-error").length||s.append(i),c.find(".csf-arrow .csf-error").length||c.find(".csf-arrow").append(i)})}c.removeClass("csf-saving"),s.prop("disabled",!1).attr("value",l),r=!1,a.vars.form_modified=!1,a.vars.$form_warning.hide(),clearTimeout(n);var o=e(".csf-form-success");o.empty().append(t.notice).fadeIn("fast",function(){n=setTimeout(function(){o.fadeOut("fast")},1e3)})}).fail(function(e){alert(e.error)})):a.vars.form_modified=!1}r=!0})})},e.fn.csf_options=function(){return this.each(function(){var i=e(this),s=i.find(".csf-content"),c=i.find(".csf-form-success"),r=i.find(".csf-form-warning"),o=i.find(".csf-header .csf-save");a.vars.$form_warning=r,r.length&&(t.onbeforeunload=function(){return!!a.vars.form_modified||void 0},s.on("change keypress",":input:not(.not-change)",function(){a.vars.form_modified||(c.hide(),r.fadeIn("fast"),a.vars.form_modified=!0)})),c.hasClass("csf-form-show")&&setTimeout(function(){c.fadeOut("fast")},1e3),e(n).keydown(function(e){if((e.ctrlKey||e.metaKey)&&83===e.which)return o.trigger("click"),e.preventDefault(),!1})})},e.fn.csf_taxonomy=function(){return this.each(function(){var t=e(this),n=t.parents("form");if("addtag"===n.attr("id")){var i=n.find("#submit"),a=t.children(".csf-field").csf_clone();i.on("click",function(){n.find(".form-required").hasClass("form-invalid")||(t.data("inited",!1),t.empty(),t.html(a),a=a.csf_clone(),t.csf_reload_script())})}})},e.fn.csf_shortcode=function(){var i=this;return i.shortcode_parse=function(t,n){var a="";return e.each(t,function(t,s){n=n||t,a+="["+n,e.each(s,function(e,t){"content"===e?(a+="]",a+=t,a+="[/"+n):a+=i.shortcode_tags(e,t)}),a+="]"}),a},i.shortcode_tags=function(t,n){var i="";return""!==n&&("object"!==(void 0===n?"undefined":_typeof(n))||e.isArray(n)?i+=" "+t+'="'+n.toString()+'"':e.each(n,function(e,t){switch(e){case"background-image":t=t.url?t.url:""}""!==t&&(i+=" "+e+'="'+t.toString()+'"')})),i},i.insertAtChars=function(e,t){var n=void 0!==e[0].name?e[0]:e;return n.value.length&&void 0!==n.selectionStart?(n.focus(),n.value.substring(0,n.selectionStart)+t+n.value.substring(n.selectionEnd,n.value.length)):(n.focus(),t)},i.send_to_editor=function(t,n){var a;if("undefined"!=typeof tinymce&&(a=tinymce.get(n)),a&&!a.isHidden())a.execCommand("mceInsertContent",!1,t);else{var s=e("#"+n);s.val(i.insertAtChars(s,t)).trigger("change")}},this.each(function(){var s,c,r,o,f,l,d,h,p,u=e(this),v=u.find(".csf-modal-load"),g=(u.find(".csf-modal-content"),u.find(".csf-modal-insert")),m=u.find(".csf-modal-loading"),_=u.find("select"),b=u.data("modal-id"),y=u.data("nonce");e(n).on("click",'.csf-shortcode-button[data-modal-id="'+b+'"]',function(t){t.preventDefault(),p=e(this),s=p.data("editor-id")||!1,c=p.data("target-id")||!1,r=p.data("gutenberg-id")||!1,u.removeClass("hidden"),u.hasClass("csf-shortcode-single")&&void 0===f&&_.trigger("change")}),_.on("change",function(){var n=e(this),i=n.find(":selected");o=n.val(),f=i.data("shortcode"),l=i.data("view")||"normal",d=i.data("group")||f,v.empty(),o?(m.show(),t.wp.ajax.post("csf-get-shortcode-"+b,{shortcode_key:o,nonce:y}).done(function(t){m.hide();var n=e(t.content).appendTo(v);g.parent().removeClass("hidden"),h=n.find(".csf--repeat-shortcode").csf_clone(),n.csf_reload_script(),n.find(".csf-fields").csf_reload_script()})):g.parent().addClass("hidden")}),g.on("click",function(n){if(n.preventDefault(),!g.prop("disabled")&&!g.attr("disabled")){var a="",o=u.find(".csf-field:not(.csf-depend-on)").find(":input:not(.ignore)").serializeObjectCSF();switch(l){case"contents":var h=f?o[f]:o;e.each(h,function(e,t){var n=f||e;a+="["+n+"]"+t+"[/"+n+"]"});break;case"group":a+="["+f,e.each(o[f],function(e,t){a+=i.shortcode_tags(e,t)}),a+="]",a+=i.shortcode_parse(o[d],d),a+="[/"+f+"]";break;case"repeater":a+=i.shortcode_parse(o[d],d);break;default:a+=i.shortcode_parse(o)}if(a=""===a?"["+f+"]":a,r){var v=t.csf_gutenberg_props.attributes.hasOwnProperty("shortcode")?t.csf_gutenberg_props.attributes.shortcode:"";t.csf_gutenberg_props.setAttributes({shortcode:v+a})}else if(s)i.send_to_editor(a,s);else{var m=c?e(c):p.parent().find("textarea");m.val(i.insertAtChars(m,a)).trigger("change")}u.addClass("hidden")}}),u.on("click",".csf--repeat-button",function(e){e.preventDefault();var t=u.find(".csf--repeatable"),n=h.csf_clone(),i=n.find(".csf-repeat-remove");n.appendTo(t);n.find(".csf-fields").csf_reload_script(),a.helper.name_nested_replace(u.find(".csf--repeat-shortcode"),d),i.on("click",function(){n.remove(),a.helper.name_nested_replace(u.find(".csf--repeat-shortcode"),d)})}),u.on("click",".csf-modal-close, .csf-modal-overlay",function(){u.addClass("hidden")})})},"function"==typeof Color&&(Color.prototype.toString=function(){if(this._alpha<1)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var e=parseInt(this._color,10).toString(16);if(this.error)return"";if(e.length<6)for(var t=6-e.length-1;t>=0;t--)e="0"+e;return"#"+e}),a.funcs.parse_color=function(e){var t=e.replace(/\s+/g,""),n=-1!==t.indexOf("rgba")?parseFloat(100*t.replace(/^.*,(.+)\)/,"$1")):100;return{value:t,transparent:n,rgba:n<100}},e.fn.csf_color=function(){return this.each(function(){var n,i=e(this),s=a.funcs.parse_color(i.val()),c=!t.csf_vars.color_palette.length||t.csf_vars.color_palette;i.hasClass("wp-color-picker")&&i.closest(".wp-picker-container").after(i).remove(),i.wpColorPicker({palettes:c,change:function(e,t){var a=t.color.toString();n.removeClass("csf--transparent-active"),n.find(".csf--transparent-offset").css("background-color",a),i.val(a).trigger("change")},create:function(){n=i.closest(".wp-picker-container");var t=i.data("a8cIris"),c=e('<div class="csf--transparent-wrap"><div class="csf--transparent-slider"></div><div class="csf--transparent-offset"></div><div class="csf--transparent-text"></div><div class="csf--transparent-button">transparent <i class="fas fa-toggle-off"></i></div></div>').appendTo(n.find(".wp-picker-holder")),r=c.find(".csf--transparent-slider"),o=c.find(".csf--transparent-text"),f=c.find(".csf--transparent-offset"),l=c.find(".csf--transparent-button");"transparent"===i.val()&&n.addClass("csf--transparent-active"),l.on("click",function(){"transparent"!==i.val()?(i.val("transparent").trigger("change").removeClass("iris-error"),n.addClass("csf--transparent-active")):(i.val(t._color.toString()).trigger("change"),n.removeClass("csf--transparent-active"))}),r.slider({value:s.transparent,step:1,min:0,max:100,slide:function(e,n){var a=parseFloat(n.value/100);t._color._alpha=a,i.wpColorPicker("color",t._color.toString()),o.text(1===a||0===a?"":a)},create:function(){var e=parseFloat(s.transparent/100),c=e<1?e:"";o.text(c),f.css("background-color",s.value),n.on("click",".wp-picker-clear",function(){t._color._alpha=1,o.text(""),r.slider("option","value",100),n.removeClass("csf--transparent-active"),i.trigger("change")}),n.on("click",".wp-picker-default",function(){var e=a.funcs.parse_color(i.data("default-color")),s=parseFloat(e.transparent/100),c=s<1?s:"";t._color._alpha=s,o.text(c),r.slider("option","value",e.transparent),"transparent"===e.value&&(i.removeClass("iris-error"),n.addClass("csf--transparent-active"))})}})}})})},e.fn.csf_chosen=function(){return this.each(function(){var n=e(this),i=n.parent().find(".chosen-container"),a=n.hasClass("csf-chosen-sortable")||!1,s=n.hasClass("csf-chosen-ajax")||!1,c=n.attr("multiple")||!1,r=c?"100%":"auto",o=e.extend({allow_single_deselect:!0,disable_search_threshold:10,width:r,no_results_text:t.csf_vars.i18n.no_results_text},n.data("chosen-settings"));if(i.length&&i.remove(),s){var f=e.extend({data:{type:"post",nonce:""},allow_single_deselect:!0,disable_search_threshold:-1,width:"100%",min_length:3,type_delay:500,typing_text:t.csf_vars.i18n.typing_text,searching_text:t.csf_vars.i18n.searching_text,no_results_text:t.csf_vars.i18n.no_results_text},n.data("chosen-settings"));n.CSFAjaxChosen(f)}else n.chosen(o);if(c){var l=n.parent().find(".csf-hide-select"),d=l.val()||[];n.on("change",function(e,n){n&&n.selected?l.append('<option value="'+n.selected+'" selected="selected">'+n.selected+"</option>"):n&&n.deselected&&l.find('option[value="'+n.deselected+'"]').remove(),void 0!==t.wp.customize&&0===l.children().length&&l.data("customize-setting-link")&&t.wp.customize.control(l.data("customize-setting-link")).setting.set(""),l.trigger("change")}),n.CSFChosenOrder(d,!0)}if(a){var h=n.parent().find(".chosen-container"),p=h.find(".chosen-choices");p.bind("mousedown",function(t){e(t.target).is("span")&&t.stopPropagation()}),p.sortable({items:"li:not(.search-field)",helper:"orginal",cursor:"move",placeholder:"search-choice-placeholder",start:function(e,t){t.placeholder.width(t.item.innerWidth()),t.placeholder.height(t.item.innerHeight())},update:function(t,i){var a="",s=n.data("chosen"),c=n.parent().find(".csf-hide-select");p.find(".search-choice-close").each(function(){var t=e(this).data("option-array-index");e.each(s.results_data,function(e,n){n.array_index===t&&(a+='<option value="'+n.value+'" selected>'+n.value+"</option>")})}),c.children().remove(),c.append(a),c.trigger("change")}})}})},e.fn.csf_checkbox=function(){return this.each(function(){var t=e(this),n=t.find(".csf--input"),i=t.find(".csf--checkbox");i.on("click",function(){n.val(Number(i.prop("checked"))).trigger("change")})})},e.fn.csf_checkbox_all=function(){return this.each(function(){var t=e(this);t.on("click",function(){var n=t.closest(".csf-field-checkbox").find(":input"),i=!1;n.each(function(){e(this).prop("checked")||(i=!0)}),i?(n.prop("checked","checked"),n.attr("checked","checked")):(n.prop("checked",""),n.removeAttr("checked")),n.first().trigger("change")})})},e.fn.csf_siblings=function(){return this.each(function(){var t=e(this),n=t.find(".csf--sibling"),i=t.data("multiple")||!1;n.on("click",function(){var n=e(this);i?n.hasClass("csf--active")?(n.removeClass("csf--active"),n.find("input").prop("checked",!1).trigger("change")):(n.addClass("csf--active"),n.find("input").prop("checked",!0).trigger("change")):(t.find("input").prop("checked",!1),n.find("input").prop("checked",!0).trigger("change"),n.addClass("csf--active").siblings().removeClass("csf--active"))})})},e.fn.csf_help=function(){return this.each(function(){var t,n,i=e(this);i.on({mouseenter:function(){t=e('<div class="csf-tooltip"></div>').html(i.find(".csf-help-text").html()).appendTo("body"),n=a.vars.is_rtl?i.offset().left+24:i.offset().left-t.outerWidth(),t.css({top:i.offset().top-(t.outerHeight()/2-14),left:n})},mouseleave:function(){void 0!==t&&t.remove()}})})},e.fn.csf_customizer_refresh=function(){return this.each(function(){var i=e(this),a=i.closest(".csf-customize-complex");if(a.length){var s=a.data("unique-id");if(void 0===s)return;var c=a.find(":input"),r=a.data("option-id"),o=c.serializeObjectCSF(),f=!e.isEmptyObject(o)&&o[s]&&o[s][r]?o[s][r]:"",l=t.wp.customize.control(s+"["+r+"]");l.setting._value=null,l.setting.set(f)}else i.find(":input").first().trigger("change");e(n).trigger("csf-customizer-refresh",i)})},e.fn.csf_customizer_listen=function(n){var i=e.extend({closest:!1},n);return this.each(function(){if(void 0!==t.wp.customize){var n=i.closest?e(this).closest(".csf-customize-complex"):e(this),a=n.find(":input"),s=n.data("unique-id"),c=n.data("option-id");void 0!==s&&a.on("change keyup csf.change",function(){var i=n.find(":input").serializeObjectCSF(),a=!e.isEmptyObject(i)&&i[s]&&i[s][c]?i[s][c]:"";t.wp.customize.control(s+"["+c+"]").setting.set(a)})}})},e(n).on("expanded",".control-section",function(){var t=e(this);if(t.hasClass("open")&&!t.data("inited")){var n=t.find(".csf-customize-field"),i=t.find(".csf-customize-complex");n.length&&(t.csf_dependency(),n.csf_reload_script({dependency:!1}),i.csf_customizer_listen()),t.data("inited",!0)}}),a.vars.$window.on("resize csf.resize",a.helper.debounce(function(n){(navigator.userAgent.indexOf("AppleWebKit/")>-1?a.vars.$window.width():t.innerWidth)<=782&&!a.vars.onloaded&&(e(".csf-section").csf_reload_script(),a.vars.onloaded=!0)},200)).trigger("csf.resize"),e.fn.csf_widgets=function(){return this.each(function(){e(n).on("widget-added widget-updated",function(e,t){var n=t.find(".csf-fields");n.length&&n.csf_reload_script()}),e(n).on("click",".widget-top",function(t){var n=e(this).parent().find(".csf-fields");n.length&&n.csf_reload_script()}),e(".widgets-sortables, .control-section-sidebar").on("sortstop",function(e,t){t.item.find(".csf-fields").csf_reload_script_retry()})})},e.fn.csf_nav_menu=function(){return this.each(function(){var t=e(this);t.on("click","a.item-edit",function(){e(this).closest("li.menu-item").find(".csf-fields").csf_reload_script()}),t.on("sortstop",function(e,t){t.item.find(".csf-fields").csf_reload_script_retry()})})},e.fn.csf_reload_script_retry=function(){return this.each(function(){var t=e(this);t.data("inited")&&t.children(".csf-field-wp_editor").csf_field_wp_editor()})},e.fn.csf_reload_script=function(t){var i=e.extend({dependency:!0},t);return this.each(function(){var t=e(this);t.data("inited")||(t.children(".csf-field-accordion").csf_field_accordion(),t.children(".csf-field-backup").csf_field_backup(),t.children(".csf-field-background").csf_field_background(),t.children(".csf-field-code_editor").csf_field_code_editor(),t.children(".csf-field-date").csf_field_date(),t.children(".csf-field-datetime").csf_field_datetime(),t.children(".csf-field-fieldset").csf_field_fieldset(),t.children(".csf-field-gallery").csf_field_gallery(),t.children(".csf-field-group").csf_field_group(),t.children(".csf-field-icon").csf_field_icon(),t.children(".csf-field-link").csf_field_link(),t.children(".csf-field-media").csf_field_media(),t.children(".csf-field-map").csf_field_map(),t.children(".csf-field-repeater").csf_field_repeater(),t.children(".csf-field-slider").csf_field_slider(),t.children(".csf-field-sortable").csf_field_sortable(),t.children(".csf-field-sorter").csf_field_sorter(),t.children(".csf-field-spinner").csf_field_spinner(),t.children(".csf-field-switcher").csf_field_switcher(),t.children(".csf-field-tabbed").csf_field_tabbed(),t.children(".csf-field-typography").csf_field_typography(),t.children(".csf-field-upload").csf_field_upload(),t.children(".csf-field-wp_editor").csf_field_wp_editor(),t.children(".csf-field-border").find(".csf-color").csf_color(),t.children(".csf-field-background").find(".csf-color").csf_color(),t.children(".csf-field-color").find(".csf-color").csf_color(),t.children(".csf-field-color_group").find(".csf-color").csf_color(),t.children(".csf-field-link_color").find(".csf-color").csf_color(),t.children(".csf-field-typography").find(".csf-color").csf_color(),t.children(".csf-field-select").find(".csf-chosen").csf_chosen(),t.children(".csf-field-checkbox").find(".csf-checkbox").csf_checkbox(),t.children(".csf-field-checkbox").find(".csf-checkbox-all").csf_checkbox_all(),t.children(".csf-field-button_set").find(".csf-siblings").csf_siblings(),t.children(".csf-field-image_select").find(".csf-siblings").csf_siblings(),t.children(".csf-field-palette").find(".csf-siblings").csf_siblings(),t.children(".csf-field").find(".csf-help").csf_help(),i.dependency&&t.csf_dependency(),t.data("inited",!0),e(n).trigger("csf-reload-script",t))})},e(n).ready(function(){e(".csf-save").csf_save(),e(".csf-options").csf_options(),e(".csf-sticky-header").csf_sticky(),e(".csf-nav-options").csf_nav_options(),e(".csf-nav-metabox").csf_nav_metabox(),e(".csf-taxonomy").csf_taxonomy(),e(".csf-page-templates").csf_page_templates(),e(".csf-post-formats").csf_post_formats(),e(".csf-shortcode").csf_shortcode(),e(".csf-search").csf_search(),e(".csf-confirm").csf_confirm(),e(".csf-expand-all").csf_expand_all(),e(".csf-onload").csf_reload_script(),e("#widgets-editor").csf_widgets(),e("#widgets-right").csf_widgets(),e("#menu-to-edit").csf_nav_menu()})}(jQuery,window,document);